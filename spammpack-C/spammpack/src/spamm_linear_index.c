#include "spamm.h"

const unsigned short int dilate_table_2[256] =
{
  0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
  0x0040, 0x0040, 0x0040, 0x0040, 0x0040, 0x0040, 0x0040, 0x0040,
  0x0100, 0x0100, 0x0100, 0x0100, 0x0100, 0x0100, 0x0100, 0x0100,
  0x0140, 0x0140, 0x0140, 0x0140, 0x0140, 0x0140, 0x0140, 0x0140,
  0x0400, 0x0400, 0x0400, 0x0400, 0x0400, 0x0400, 0x0400, 0x0400,
  0x0440, 0x0440, 0x0440, 0x0440, 0x0440, 0x0440, 0x0440, 0x0440,
  0x0500, 0x0500, 0x0500, 0x0500, 0x0500, 0x0500, 0x0500, 0x0500,
  0x0540, 0x0540, 0x0540, 0x0540, 0x0540, 0x0540, 0x0540, 0x0540,
  0x1000, 0x1000, 0x1000, 0x1000, 0x1000, 0x1000, 0x1000, 0x1000,
  0x1040, 0x1040, 0x1040, 0x1040, 0x1040, 0x1040, 0x1040, 0x1040,
  0x1100, 0x1100, 0x1100, 0x1100, 0x1100, 0x1100, 0x1100, 0x1100,
  0x1140, 0x1140, 0x1140, 0x1140, 0x1140, 0x1140, 0x1140, 0x1140,
  0x1400, 0x1400, 0x1400, 0x1400, 0x1400, 0x1400, 0x1400, 0x1400,
  0x1440, 0x1440, 0x1440, 0x1440, 0x1440, 0x1440, 0x1440, 0x1440,
  0x1500, 0x1500, 0x1500, 0x1500, 0x1500, 0x1500, 0x1500, 0x1500,
  0x1540, 0x1540, 0x1540, 0x1540, 0x1540, 0x1540, 0x1540, 0x1540,
  0x4000, 0x4000, 0x4000, 0x4000, 0x4000, 0x4000, 0x4000, 0x4000,
  0x4040, 0x4040, 0x4040, 0x4040, 0x4040, 0x4040, 0x4040, 0x4040,
  0x4100, 0x4100, 0x4100, 0x4100, 0x4100, 0x4100, 0x4100, 0x4100,
  0x4140, 0x4140, 0x4140, 0x4140, 0x4140, 0x4140, 0x4140, 0x4140,
  0x4400, 0x4400, 0x4400, 0x4400, 0x4400, 0x4400, 0x4400, 0x4400,
  0x4440, 0x4440, 0x4440, 0x4440, 0x4440, 0x4440, 0x4440, 0x4440,
  0x4500, 0x4500, 0x4500, 0x4500, 0x4500, 0x4500, 0x4500, 0x4500,
  0x4540, 0x4540, 0x4540, 0x4540, 0x4540, 0x4540, 0x4540, 0x4540,
  0x5000, 0x5000, 0x5000, 0x5000, 0x5000, 0x5000, 0x5000, 0x5000,
  0x5040, 0x5040, 0x5040, 0x5040, 0x5040, 0x5040, 0x5040, 0x5040,
  0x5100, 0x5100, 0x5100, 0x5100, 0x5100, 0x5100, 0x5100, 0x5100,
  0x5140, 0x5140, 0x5140, 0x5140, 0x5140, 0x5140, 0x5140, 0x5140,
  0x5400, 0x5400, 0x5400, 0x5400, 0x5400, 0x5400, 0x5400, 0x5400,
  0x5440, 0x5440, 0x5440, 0x5440, 0x5440, 0x5440, 0x5440, 0x5440,
  0x5500, 0x5500, 0x5500, 0x5500, 0x5500, 0x5500, 0x5500, 0x5500,
  0x5540, 0x5540, 0x5540, 0x5540, 0x5540, 0x5540, 0x5540, 0x5540
};

/** Dilate matrix index pair and form linear index.
 *
 * @param i The first index.
 * @param j The second index.
 *
 * @return The linear index.
 */
unsigned int
spamm_linear_index_2D (const unsigned int i, const unsigned int j)
{
  unsigned int result;

  result = (dilate_table_2[0xff & i] | (dilate_table_2[(0xffff & i) >> 8] << 16))
    | (dilate_table_2[0xff & j] | (dilate_table_2[(0xffff & j) >> 8] << 16)) << 1;

  LOG_INFO("i = %u, j = %u, result = 0x%x\n", i, j, result);

  return result;
}
